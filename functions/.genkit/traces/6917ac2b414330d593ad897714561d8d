{"traceId":"6917ac2b414330d593ad897714561d8d","spans":{"7efe7e38123a61f0":{"spanId":"7efe7e38123a61f0","traceId":"6917ac2b414330d593ad897714561d8d","parentSpanId":"f638d8e394fbf4ed","startTime":1749279330255,"endTime":1749279336619.2817,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"model","genkit:name":"vertexai/gemini-2.5-pro-preview-05-06","genkit:path":"/{dailyNeedsFlow,t:flow}/{generate,t:util}/{vertexai/gemini-2.5-pro-preview-05-06,t:action,s:model}","genkit:input":"{\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"\\nYou are a professional dietitian. Given a user's goal, suggest an adjustment factor to apply on top of the activity multiplier.\\n\\n- \\\"gain weight\\\": increase calories by ~10-20%.\\n- \\\"maintain weight\\\": no change.\\n- \\\"lose weight\\\": decrease calories by ~10-20%.\\n- \\\"drink more water\\\": no calorie change, increase water by ~10-20%.\\n\\nReturn **only** a JSON object:\\n{\\n  \\\"calorieFactor\\\": number,\\n  \\\"waterFactor\\\": number\\n}\\n\\nDo not include any extra text.\\n\\nUser Goal: gain weight\\n  \"},{\"text\":\"Output should be in JSON format and conform to the following schema:\\n\\n```\\n{\\\"type\\\":\\\"object\\\",\\\"properties\\\":{\\\"calorieFactor\\\":{\\\"type\\\":\\\"number\\\"},\\\"waterFactor\\\":{\\\"type\\\":\\\"number\\\"}},\\\"required\\\":[\\\"calorieFactor\\\",\\\"waterFactor\\\"],\\\"additionalProperties\\\":true,\\\"$schema\\\":\\\"http://json-schema.org/draft-07/schema#\\\"}\\n```\\n\",\"metadata\":{\"purpose\":\"output\"}}]}],\"config\":{},\"tools\":[],\"output\":{\"constrained\":false}}","genkit:output":"{\"candidates\":[{\"index\":0,\"message\":{\"role\":\"model\",\"content\":[{\"text\":\"```json\\n{\\n  \\\"calorieFactor\\\": 1.15,\\n  \\\"waterFactor\\\": 1.0\\n}\\n```\"}]},\"finishReason\":\"stop\",\"custom\":{}}],\"custom\":{\"candidates\":[{\"content\":{\"role\":\"model\",\"parts\":[{\"text\":\"```json\\n{\\n  \\\"calorieFactor\\\": 1.15,\\n  \\\"waterFactor\\\": 1.0\\n}\\n```\"}]},\"finishReason\":\"STOP\",\"avgLogprobs\":-3.0157796223958333,\"index\":0}],\"usageMetadata\":{\"promptTokenCount\":209,\"candidatesTokenCount\":30,\"totalTokenCount\":903,\"trafficType\":\"ON_DEMAND\",\"promptTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":209}],\"candidatesTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":30}],\"thoughtsTokenCount\":664},\"modelVersion\":\"gemini-2.5-pro-preview-05-06\",\"createTime\":\"2025-06-07T06:55:27.987896Z\",\"responseId\":\"X-JDaPilPICgmecPisLE-Aw\"},\"usage\":{\"inputCharacters\":769,\"inputImages\":0,\"inputVideos\":0,\"inputAudioFiles\":0,\"outputCharacters\":61,\"outputImages\":0,\"outputVideos\":0,\"outputAudioFiles\":0,\"inputTokens\":209,\"outputTokens\":30,\"totalTokens\":903},\"latencyMs\":6363.8112}","genkit:state":"success"},"displayName":"vertexai/gemini-2.5-pro-preview-05-06","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}},"f638d8e394fbf4ed":{"spanId":"f638d8e394fbf4ed","traceId":"6917ac2b414330d593ad897714561d8d","parentSpanId":"3e184dd942e5c8b8","startTime":1749279330204,"endTime":1749279336693.5608,"attributes":{"genkit:type":"util","genkit:name":"generate","genkit:path":"/{dailyNeedsFlow,t:flow}/{generate,t:util}","genkit:input":"{\"model\":\"vertexai/gemini-2.5-pro-preview-05-06\",\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"\\nYou are a professional dietitian. Given a user's goal, suggest an adjustment factor to apply on top of the activity multiplier.\\n\\n- \\\"gain weight\\\": increase calories by ~10-20%.\\n- \\\"maintain weight\\\": no change.\\n- \\\"lose weight\\\": decrease calories by ~10-20%.\\n- \\\"drink more water\\\": no calorie change, increase water by ~10-20%.\\n\\nReturn **only** a JSON object:\\n{\\n  \\\"calorieFactor\\\": number,\\n  \\\"waterFactor\\\": number\\n}\\n\\nDo not include any extra text.\\n\\nUser Goal: gain weight\\n  \"}]}],\"config\":{},\"output\":{\"schema\":{\"_def\":{\"unknownKeys\":\"strip\",\"catchall\":{\"_def\":{\"typeName\":\"ZodNever\"},\"~standard\":{\"version\":1,\"vendor\":\"zod\"}},\"typeName\":\"ZodObject\"},\"~standard\":{\"version\":1,\"vendor\":\"zod\"},\"_cached\":null},\"format\":\"json\",\"jsonSchema\":{\"type\":\"object\",\"properties\":{\"calorieFactor\":{\"type\":\"number\"},\"waterFactor\":{\"type\":\"number\"}},\"required\":[\"calorieFactor\",\"waterFactor\"],\"additionalProperties\":true,\"$schema\":\"http://json-schema.org/draft-07/schema#\"}}}","genkit:output":"{\"message\":{\"role\":\"model\",\"content\":[{\"text\":\"```json\\n{\\n  \\\"calorieFactor\\\": 1.15,\\n  \\\"waterFactor\\\": 1.0\\n}\\n```\"}]},\"finishReason\":\"stop\",\"usage\":{\"inputCharacters\":769,\"inputImages\":0,\"inputVideos\":0,\"inputAudioFiles\":0,\"outputCharacters\":61,\"outputImages\":0,\"outputVideos\":0,\"outputAudioFiles\":0,\"inputTokens\":209,\"outputTokens\":30,\"totalTokens\":903},\"custom\":{\"candidates\":[{\"content\":{\"role\":\"model\",\"parts\":[{\"text\":\"```json\\n{\\n  \\\"calorieFactor\\\": 1.15,\\n  \\\"waterFactor\\\": 1.0\\n}\\n```\"}]},\"finishReason\":\"STOP\",\"avgLogprobs\":-3.0157796223958333,\"index\":0}],\"usageMetadata\":{\"promptTokenCount\":209,\"candidatesTokenCount\":30,\"totalTokenCount\":903,\"trafficType\":\"ON_DEMAND\",\"promptTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":209}],\"candidatesTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":30}],\"thoughtsTokenCount\":664},\"modelVersion\":\"gemini-2.5-pro-preview-05-06\",\"createTime\":\"2025-06-07T06:55:27.987896Z\",\"responseId\":\"X-JDaPilPICgmecPisLE-Aw\"},\"request\":{\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"\\nYou are a professional dietitian. Given a user's goal, suggest an adjustment factor to apply on top of the activity multiplier.\\n\\n- \\\"gain weight\\\": increase calories by ~10-20%.\\n- \\\"maintain weight\\\": no change.\\n- \\\"lose weight\\\": decrease calories by ~10-20%.\\n- \\\"drink more water\\\": no calorie change, increase water by ~10-20%.\\n\\nReturn **only** a JSON object:\\n{\\n  \\\"calorieFactor\\\": number,\\n  \\\"waterFactor\\\": number\\n}\\n\\nDo not include any extra text.\\n\\nUser Goal: gain weight\\n  \"}]}],\"config\":{},\"tools\":[],\"output\":{\"constrained\":true,\"contentType\":\"application/json\",\"format\":\"json\",\"schema\":{\"type\":\"object\",\"properties\":{\"calorieFactor\":{\"type\":\"number\"},\"waterFactor\":{\"type\":\"number\"}},\"required\":[\"calorieFactor\",\"waterFactor\"],\"additionalProperties\":true,\"$schema\":\"http://json-schema.org/draft-07/schema#\"}}}}","genkit:state":"success"},"displayName":"generate","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}},"5294d67d3938bfab":{"spanId":"5294d67d3938bfab","traceId":"6917ac2b414330d593ad897714561d8d","parentSpanId":"d27e337dbe2ed6fc","startTime":1749279336702,"endTime":1749279399488.1653,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"model","genkit:name":"vertexai/gemini-2.5-pro-preview-05-06","genkit:path":"/{dailyNeedsFlow,t:flow}/{generate,t:util}/{vertexai/gemini-2.5-pro-preview-05-06,t:action,s:model}","genkit:input":"{\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"\\nYou are a professional dietitian. Given a user's daily calorie target, suggest an appropriate macronutrient split (protein, carbs, fats) in grams.\\n\\n- Provide protein, carbs, and fats in grams.\\n- Use common ratios (e.g., protein 1.2-2.0g/kg body weight, carbs 45-65% of calories, fats 20-35% of calories).\\n\\nReturn **only** a JSON object:\\n{\\n  \\\"proteinTarget\\\": number,\\n  \\\"carbsTarget\\\": number,\\n  \\\"fatsTarget\\\": number\\n}\\n\\nUser Info:\\n- Calories: 3551\\n- Weight: 65\\n- Goal: gain weight\\n  \"},{\"text\":\"Output should be in JSON format and conform to the following schema:\\n\\n```\\n{\\\"type\\\":\\\"object\\\",\\\"properties\\\":{\\\"proteinTarget\\\":{\\\"type\\\":\\\"number\\\"},\\\"carbsTarget\\\":{\\\"type\\\":\\\"number\\\"},\\\"fatsTarget\\\":{\\\"type\\\":\\\"number\\\"}},\\\"required\\\":[\\\"proteinTarget\\\",\\\"carbsTarget\\\",\\\"fatsTarget\\\"],\\\"additionalProperties\\\":true,\\\"$schema\\\":\\\"http://json-schema.org/draft-07/schema#\\\"}\\n```\\n\",\"metadata\":{\"purpose\":\"output\"}}]}],\"config\":{},\"tools\":[],\"output\":{\"constrained\":false}}","genkit:output":"{\"candidates\":[{\"index\":0,\"message\":{\"role\":\"model\",\"content\":[{\"text\":\"```json\\n{\\n  \\\"proteinTarget\\\": 117,\\n  \\\"carbsTarget\\\": 523,\\n  \\\"fatsTarget\\\": 110\\n}\\n```\"}]},\"finishReason\":\"stop\",\"custom\":{}}],\"custom\":{\"candidates\":[{\"content\":{\"role\":\"model\",\"parts\":[{\"text\":\"```json\\n{\\n  \\\"proteinTarget\\\": 117,\\n  \\\"carbsTarget\\\": 523,\\n  \\\"fatsTarget\\\": 110\\n}\\n```\"}]},\"finishReason\":\"STOP\",\"avgLogprobs\":-27.61489722842262,\"index\":0}],\"usageMetadata\":{\"promptTokenCount\":249,\"candidatesTokenCount\":42,\"totalTokenCount\":7927,\"trafficType\":\"ON_DEMAND\",\"promptTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":249}],\"candidatesTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":42}],\"thoughtsTokenCount\":7636},\"modelVersion\":\"gemini-2.5-pro-preview-05-06\",\"createTime\":\"2025-06-07T06:55:34.295369Z\",\"responseId\":\"ZuJDaMmDEo-hmecPo_6MsAk\"},\"usage\":{\"inputCharacters\":825,\"inputImages\":0,\"inputVideos\":0,\"inputAudioFiles\":0,\"outputCharacters\":81,\"outputImages\":0,\"outputVideos\":0,\"outputAudioFiles\":0,\"inputTokens\":249,\"outputTokens\":42,\"totalTokens\":7927},\"latencyMs\":62785.994600000005}","genkit:state":"success"},"displayName":"vertexai/gemini-2.5-pro-preview-05-06","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}},"d27e337dbe2ed6fc":{"spanId":"d27e337dbe2ed6fc","traceId":"6917ac2b414330d593ad897714561d8d","parentSpanId":"3e184dd942e5c8b8","startTime":1749279336699,"endTime":1749279399490.2551,"attributes":{"genkit:type":"util","genkit:name":"generate","genkit:path":"/{dailyNeedsFlow,t:flow}/{generate,t:util}","genkit:input":"{\"model\":\"vertexai/gemini-2.5-pro-preview-05-06\",\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"\\nYou are a professional dietitian. Given a user's daily calorie target, suggest an appropriate macronutrient split (protein, carbs, fats) in grams.\\n\\n- Provide protein, carbs, and fats in grams.\\n- Use common ratios (e.g., protein 1.2-2.0g/kg body weight, carbs 45-65% of calories, fats 20-35% of calories).\\n\\nReturn **only** a JSON object:\\n{\\n  \\\"proteinTarget\\\": number,\\n  \\\"carbsTarget\\\": number,\\n  \\\"fatsTarget\\\": number\\n}\\n\\nUser Info:\\n- Calories: 3551\\n- Weight: 65\\n- Goal: gain weight\\n  \"}]}],\"config\":{},\"output\":{\"schema\":{\"_def\":{\"unknownKeys\":\"strip\",\"catchall\":{\"_def\":{\"typeName\":\"ZodNever\"},\"~standard\":{\"version\":1,\"vendor\":\"zod\"}},\"typeName\":\"ZodObject\"},\"~standard\":{\"version\":1,\"vendor\":\"zod\"},\"_cached\":null},\"format\":\"json\",\"jsonSchema\":{\"type\":\"object\",\"properties\":{\"proteinTarget\":{\"type\":\"number\"},\"carbsTarget\":{\"type\":\"number\"},\"fatsTarget\":{\"type\":\"number\"}},\"required\":[\"proteinTarget\",\"carbsTarget\",\"fatsTarget\"],\"additionalProperties\":true,\"$schema\":\"http://json-schema.org/draft-07/schema#\"}}}","genkit:output":"{\"message\":{\"role\":\"model\",\"content\":[{\"text\":\"```json\\n{\\n  \\\"proteinTarget\\\": 117,\\n  \\\"carbsTarget\\\": 523,\\n  \\\"fatsTarget\\\": 110\\n}\\n```\"}]},\"finishReason\":\"stop\",\"usage\":{\"inputCharacters\":825,\"inputImages\":0,\"inputVideos\":0,\"inputAudioFiles\":0,\"outputCharacters\":81,\"outputImages\":0,\"outputVideos\":0,\"outputAudioFiles\":0,\"inputTokens\":249,\"outputTokens\":42,\"totalTokens\":7927},\"custom\":{\"candidates\":[{\"content\":{\"role\":\"model\",\"parts\":[{\"text\":\"```json\\n{\\n  \\\"proteinTarget\\\": 117,\\n  \\\"carbsTarget\\\": 523,\\n  \\\"fatsTarget\\\": 110\\n}\\n```\"}]},\"finishReason\":\"STOP\",\"avgLogprobs\":-27.61489722842262,\"index\":0}],\"usageMetadata\":{\"promptTokenCount\":249,\"candidatesTokenCount\":42,\"totalTokenCount\":7927,\"trafficType\":\"ON_DEMAND\",\"promptTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":249}],\"candidatesTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":42}],\"thoughtsTokenCount\":7636},\"modelVersion\":\"gemini-2.5-pro-preview-05-06\",\"createTime\":\"2025-06-07T06:55:34.295369Z\",\"responseId\":\"ZuJDaMmDEo-hmecPo_6MsAk\"},\"request\":{\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"\\nYou are a professional dietitian. Given a user's daily calorie target, suggest an appropriate macronutrient split (protein, carbs, fats) in grams.\\n\\n- Provide protein, carbs, and fats in grams.\\n- Use common ratios (e.g., protein 1.2-2.0g/kg body weight, carbs 45-65% of calories, fats 20-35% of calories).\\n\\nReturn **only** a JSON object:\\n{\\n  \\\"proteinTarget\\\": number,\\n  \\\"carbsTarget\\\": number,\\n  \\\"fatsTarget\\\": number\\n}\\n\\nUser Info:\\n- Calories: 3551\\n- Weight: 65\\n- Goal: gain weight\\n  \"}]}],\"config\":{},\"tools\":[],\"output\":{\"constrained\":true,\"contentType\":\"application/json\",\"format\":\"json\",\"schema\":{\"type\":\"object\",\"properties\":{\"proteinTarget\":{\"type\":\"number\"},\"carbsTarget\":{\"type\":\"number\"},\"fatsTarget\":{\"type\":\"number\"}},\"required\":[\"proteinTarget\",\"carbsTarget\",\"fatsTarget\"],\"additionalProperties\":true,\"$schema\":\"http://json-schema.org/draft-07/schema#\"}}}}","genkit:state":"success"},"displayName":"generate","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}},"3e184dd942e5c8b8":{"spanId":"3e184dd942e5c8b8","traceId":"6917ac2b414330d593ad897714561d8d","startTime":1749279330195,"endTime":1749279399491.382,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"flow","genkit:name":"dailyNeedsFlow","genkit:isRoot":true,"genkit:path":"/{dailyNeedsFlow,t:flow}","genkit:metadata:context":"{}","genkit:input":"{\"gender\":\"Men\",\"birthday\":\"2000/10/10\",\"height\":175,\"weight\":65,\"activityLevel\":\"extra active\",\"goal\":\"gain weight\"}","genkit:output":"{\"calories\":3551,\"water\":2275,\"proteinTarget\":117,\"carbsTarget\":523,\"fatsTarget\":110}","genkit:state":"success"},"displayName":"dailyNeedsFlow","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}}},"displayName":"dailyNeedsFlow","startTime":1749279330195,"endTime":1749279399491.382}