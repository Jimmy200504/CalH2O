{"traceId":"66c9f0222ac992ae73a3de7f258dc0f9","spans":{"5504ff1a66cdf0b8":{"spanId":"5504ff1a66cdf0b8","traceId":"66c9f0222ac992ae73a3de7f258dc0f9","parentSpanId":"b7fb11c36ffdb5fb","startTime":1749197387858,"endTime":1749197389796.9966,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"model","genkit:name":"vertexai/gemini-2.0-flash","genkit:path":"/{textToNutritionFlow,t:flow}/{generate,t:util}/{vertexai/gemini-2.0-flash,t:action,s:model}","genkit:input":"{\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"You are a professional nutritionist. \\n  Given the following user description of foods consumed, \\n  do the following in one step:\\n\\n\\n  1. List all foods mentioned and estimate their amount as precisely as possible (use specific units, e.g., grams, ml, pieces).\\n\\n  2. For the recognized foods and their amounts, estimate the total nutrition facts: calories (kcal), carbohydrate (g), protein (g), and fat (g).\\n\\n  3. Give a short, positive, and encouraging comment to the user about their meal and encourage them to keep recording.\\n\\n\\n  Return a valid JSON object with two fields:\\n- \\\"nutrition\\\": an object with fields \\\"calories\\\", \\\"carbohydrate\\\", \\\"protein\\\", \\\"fat\\\" (all numbers)\\n- \\n  \\\"comment\\\": a short string with your positive feedback and encouragement\\n\\n\\n  Do not include any extra commentary or explanation. \\n  Only output valid JSON.\\n\\nI just ate an cheese burger in McDonalid\"}]}],\"config\":{},\"tools\":[],\"output\":{\"constrained\":true,\"contentType\":\"application/json\",\"format\":\"json\",\"schema\":{\"type\":\"object\",\"properties\":{\"nutrition\":{\"type\":\"object\",\"properties\":{\"calories\":{\"type\":\"number\"},\"carbohydrate\":{\"type\":\"number\"},\"protein\":{\"type\":\"number\"},\"fat\":{\"type\":\"number\"}},\"required\":[\"calories\",\"carbohydrate\",\"protein\",\"fat\"],\"additionalProperties\":true},\"comment\":{\"type\":\"string\"}},\"required\":[\"nutrition\",\"comment\"],\"additionalProperties\":true,\"$schema\":\"http://json-schema.org/draft-07/schema#\"}}}","genkit:output":"{\"candidates\":[{\"index\":0,\"message\":{\"role\":\"model\",\"content\":[{\"text\":\"{\\n  \\\"comment\\\": \\\"Great job tracking your meal! Keep up the consistent recording to stay informed about your nutrition.\\\",\\n  \\\"nutrition\\\": {\\n    \\\"calories\\\": 503,\\n    \\\"carbohydrate\\\": 41,\\n    \\\"fat\\\": 25,\\n    \\\"protein\\\": 30\\n  }\\n}\"}]},\"finishReason\":\"stop\",\"custom\":{}}],\"custom\":{\"candidates\":[{\"content\":{\"role\":\"model\",\"parts\":[{\"text\":\"{\\n  \\\"comment\\\": \\\"Great job tracking your meal! Keep up the consistent recording to stay informed about your nutrition.\\\",\\n  \\\"nutrition\\\": {\\n    \\\"calories\\\": 503,\\n    \\\"carbohydrate\\\": 41,\\n    \\\"fat\\\": 25,\\n    \\\"protein\\\": 30\\n  }\\n}\"}]},\"finishReason\":\"STOP\",\"avgLogprobs\":-0.05747467197784006,\"index\":0}],\"usageMetadata\":{\"promptTokenCount\":226,\"candidatesTokenCount\":73,\"totalTokenCount\":299,\"trafficType\":\"ON_DEMAND\",\"promptTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":226}],\"candidatesTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":73}]},\"modelVersion\":\"gemini-2.0-flash\",\"createTime\":\"2025-06-06T08:09:49.095458Z\",\"responseId\":\"TaJCaOLpBeSpnvgPu7fSiQY\"},\"usage\":{\"inputCharacters\":872,\"inputImages\":0,\"inputVideos\":0,\"inputAudioFiles\":0,\"outputCharacters\":220,\"outputImages\":0,\"outputVideos\":0,\"outputAudioFiles\":0,\"inputTokens\":226,\"outputTokens\":73,\"totalTokens\":299},\"latencyMs\":1938.5312080000003}","genkit:state":"success"},"displayName":"vertexai/gemini-2.0-flash","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}},"b7fb11c36ffdb5fb":{"spanId":"b7fb11c36ffdb5fb","traceId":"66c9f0222ac992ae73a3de7f258dc0f9","parentSpanId":"6ca6deb91b24c3e1","startTime":1749197387831,"endTime":1749197389833.7036,"attributes":{"genkit:type":"util","genkit:name":"generate","genkit:path":"/{textToNutritionFlow,t:flow}/{generate,t:util}","genkit:input":"{\"model\":\"vertexai/gemini-2.0-flash\",\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"You are a professional nutritionist. \\n  Given the following user description of foods consumed, \\n  do the following in one step:\\n\\n\\n  1. List all foods mentioned and estimate their amount as precisely as possible (use specific units, e.g., grams, ml, pieces).\\n\\n  2. For the recognized foods and their amounts, estimate the total nutrition facts: calories (kcal), carbohydrate (g), protein (g), and fat (g).\\n\\n  3. Give a short, positive, and encouraging comment to the user about their meal and encourage them to keep recording.\\n\\n\\n  Return a valid JSON object with two fields:\\n- \\\"nutrition\\\": an object with fields \\\"calories\\\", \\\"carbohydrate\\\", \\\"protein\\\", \\\"fat\\\" (all numbers)\\n- \\n  \\\"comment\\\": a short string with your positive feedback and encouragement\\n\\n\\n  Do not include any extra commentary or explanation. \\n  Only output valid JSON.\\n\\nI just ate an cheese burger in McDonalid\"}]}],\"config\":{},\"output\":{\"schema\":{\"_def\":{\"unknownKeys\":\"strip\",\"catchall\":{\"_def\":{\"typeName\":\"ZodNever\"},\"~standard\":{\"version\":1,\"vendor\":\"zod\"}},\"typeName\":\"ZodObject\"},\"~standard\":{\"version\":1,\"vendor\":\"zod\"},\"_cached\":null},\"format\":\"json\",\"jsonSchema\":{\"type\":\"object\",\"properties\":{\"nutrition\":{\"type\":\"object\",\"properties\":{\"calories\":{\"type\":\"number\"},\"carbohydrate\":{\"type\":\"number\"},\"protein\":{\"type\":\"number\"},\"fat\":{\"type\":\"number\"}},\"required\":[\"calories\",\"carbohydrate\",\"protein\",\"fat\"],\"additionalProperties\":true},\"comment\":{\"type\":\"string\"}},\"required\":[\"nutrition\",\"comment\"],\"additionalProperties\":true,\"$schema\":\"http://json-schema.org/draft-07/schema#\"}}}","genkit:output":"{\"message\":{\"role\":\"model\",\"content\":[{\"text\":\"{\\n  \\\"comment\\\": \\\"Great job tracking your meal! Keep up the consistent recording to stay informed about your nutrition.\\\",\\n  \\\"nutrition\\\": {\\n    \\\"calories\\\": 503,\\n    \\\"carbohydrate\\\": 41,\\n    \\\"fat\\\": 25,\\n    \\\"protein\\\": 30\\n  }\\n}\"}]},\"finishReason\":\"stop\",\"usage\":{\"inputCharacters\":872,\"inputImages\":0,\"inputVideos\":0,\"inputAudioFiles\":0,\"outputCharacters\":220,\"outputImages\":0,\"outputVideos\":0,\"outputAudioFiles\":0,\"inputTokens\":226,\"outputTokens\":73,\"totalTokens\":299},\"custom\":{\"candidates\":[{\"content\":{\"role\":\"model\",\"parts\":[{\"text\":\"{\\n  \\\"comment\\\": \\\"Great job tracking your meal! Keep up the consistent recording to stay informed about your nutrition.\\\",\\n  \\\"nutrition\\\": {\\n    \\\"calories\\\": 503,\\n    \\\"carbohydrate\\\": 41,\\n    \\\"fat\\\": 25,\\n    \\\"protein\\\": 30\\n  }\\n}\"}]},\"finishReason\":\"STOP\",\"avgLogprobs\":-0.05747467197784006,\"index\":0}],\"usageMetadata\":{\"promptTokenCount\":226,\"candidatesTokenCount\":73,\"totalTokenCount\":299,\"trafficType\":\"ON_DEMAND\",\"promptTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":226}],\"candidatesTokensDetails\":[{\"modality\":\"TEXT\",\"tokenCount\":73}]},\"modelVersion\":\"gemini-2.0-flash\",\"createTime\":\"2025-06-06T08:09:49.095458Z\",\"responseId\":\"TaJCaOLpBeSpnvgPu7fSiQY\"},\"request\":{\"messages\":[{\"role\":\"user\",\"content\":[{\"text\":\"You are a professional nutritionist. \\n  Given the following user description of foods consumed, \\n  do the following in one step:\\n\\n\\n  1. List all foods mentioned and estimate their amount as precisely as possible (use specific units, e.g., grams, ml, pieces).\\n\\n  2. For the recognized foods and their amounts, estimate the total nutrition facts: calories (kcal), carbohydrate (g), protein (g), and fat (g).\\n\\n  3. Give a short, positive, and encouraging comment to the user about their meal and encourage them to keep recording.\\n\\n\\n  Return a valid JSON object with two fields:\\n- \\\"nutrition\\\": an object with fields \\\"calories\\\", \\\"carbohydrate\\\", \\\"protein\\\", \\\"fat\\\" (all numbers)\\n- \\n  \\\"comment\\\": a short string with your positive feedback and encouragement\\n\\n\\n  Do not include any extra commentary or explanation. \\n  Only output valid JSON.\\n\\nI just ate an cheese burger in McDonalid\"}]}],\"config\":{},\"tools\":[],\"output\":{\"constrained\":true,\"contentType\":\"application/json\",\"format\":\"json\",\"schema\":{\"type\":\"object\",\"properties\":{\"nutrition\":{\"type\":\"object\",\"properties\":{\"calories\":{\"type\":\"number\"},\"carbohydrate\":{\"type\":\"number\"},\"protein\":{\"type\":\"number\"},\"fat\":{\"type\":\"number\"}},\"required\":[\"calories\",\"carbohydrate\",\"protein\",\"fat\"],\"additionalProperties\":true},\"comment\":{\"type\":\"string\"}},\"required\":[\"nutrition\",\"comment\"],\"additionalProperties\":true,\"$schema\":\"http://json-schema.org/draft-07/schema#\"}}}}","genkit:state":"success"},"displayName":"generate","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}},"6ca6deb91b24c3e1":{"spanId":"6ca6deb91b24c3e1","traceId":"66c9f0222ac992ae73a3de7f258dc0f9","startTime":1749197387826,"endTime":1749197389834.656,"attributes":{"genkit:type":"action","genkit:metadata:subtype":"flow","genkit:name":"textToNutritionFlow","genkit:isRoot":true,"genkit:path":"/{textToNutritionFlow,t:flow}","genkit:metadata:context":"{}","genkit:input":"{\"text\":\"I just ate an cheese burger in McDonalid\"}","genkit:output":"{\"calories\":503,\"carbohydrate\":41,\"fat\":25,\"protein\":30,\"comment\":\"Great job tracking your meal! Keep up the consistent recording to stay informed about your nutrition.\"}","genkit:state":"success"},"displayName":"textToNutritionFlow","links":[],"instrumentationLibrary":{"name":"genkit-tracer","version":"v1"},"spanKind":"INTERNAL","sameProcessAsParentSpan":{"value":true},"status":{"code":0},"timeEvents":{"timeEvent":[]}}},"displayName":"textToNutritionFlow","startTime":1749197387826,"endTime":1749197389834.656}